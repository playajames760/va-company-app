{% extends 'base.html' %}
{% block content %}
<div class="p-4 bg-white rounded shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="mb-0">Cargo Manifest #{{ m.id }}</h2>
    <a href="{{ url_for('cargo_history') }}" class="btn btn-outline-secondary btn-sm">History</a>
  </div>
  {% if m.dispatch_release_id %}
    <div class="alert alert-info small mb-3">Linked to Dispatch Release <a href="{{ url_for('dispatch_detail', id=m.dispatch_release_id) }}" class="alert-link">#{{ m.dispatch_release_id }}</a>.</div>
  {% endif %}
  <dl class="row mb-0">
    <dt class="col-sm-3">Date</dt><dd class="col-sm-9">{{ m.date }}</dd>
    <dt class="col-sm-3">Flight ID</dt><dd class="col-sm-9">{{ m.flight_id }}</dd>
    <dt class="col-sm-3">Aircraft</dt><dd class="col-sm-9">{{ m.aircraft }}</dd>
    <dt class="col-sm-3">Departure</dt><dd class="col-sm-9">{{ m.departure }}</dd>
    <dt class="col-sm-3">Arrival</dt><dd class="col-sm-9">{{ m.arrival }}</dd>
    <dt class="col-sm-3">Total Weight (lbs)</dt><dd class="col-sm-9">{{ m.total_weight }}</dd>
    <dt class="col-sm-3">Pieces</dt><dd class="col-sm-9">{{ m.pieces }}</dd>
    <dt class="col-sm-3">Notes</dt><dd class="col-sm-9"><pre class="small bg-light p-2 border rounded" style="white-space:pre-wrap">{{ m.notes }}</pre></dd>
  </dl>
  <div class="mt-3 d-flex gap-2">
    <a class="btn btn-outline-primary btn-sm" href="{{ url_for('crew', date=m.date, flight_id=m.flight_id, origin=m.departure, destination=m.arrival, aircraft=m.aircraft, cargo_manifest_id=m.id, dispatch_release_id=m.dispatch_release_id) }}">Log Crew</a>
    <a class="btn btn-outline-primary btn-sm" href="{{ url_for('dispatch', date=m.date, flight_id=m.flight_id, aircraft=m.aircraft, departure=m.departure, destination=m.arrival) }}">Create/Edit Dispatch</a>
  </div>
</div>
{% endblock %}