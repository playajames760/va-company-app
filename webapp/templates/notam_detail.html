{% extends 'base.html' %}
{% block content %}
<div class="p-4 bg-white rounded shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="mb-0">Company NOTAM #{{ n.id }}</h2>
    <div class="btn-group btn-group-sm">
      {% if current_employee and current_employee.role in ['Manager','Administrator'] %}
        <a href="#editForm" class="btn btn-outline-primary btn-sm" onclick="document.getElementById('editForm').classList.toggle('d-none');return false;">Edit</a>
      {% endif %}
    </div>
  </div>
  <dl class="row mb-0">
    <dt class="col-sm-3">NOTAM ID</dt><dd class="col-sm-9">{{ n.notam_id }}</dd>
    <dt class="col-sm-3">Subject</dt><dd class="col-sm-9">{{ n.subject }}</dd>
    <dt class="col-sm-3">Area</dt><dd class="col-sm-9">{{ n.area }}</dd>
    <dt class="col-sm-3">Status</dt><dd class="col-sm-9">{{ n.status }}</dd>
    <dt class="col-sm-3">Text</dt><dd class="col-sm-9"><pre class="small bg-light p-2 border rounded" style="white-space:pre-wrap">{{ n.text }}</pre></dd>
  </dl>
  <div class="mt-4 d-flex justify-content-end">
    <form action="{{ url_for('delete_notam', id=n.id) }}" method="post" class="d-inline" onsubmit="return confirm('Delete this NOTAM?');">
      <button class="btn btn-outline-danger btn-sm">Delete</button>
    </form>
  </div>
  {% if current_employee and current_employee.role in ['Manager','Administrator'] %}
  <div id="editForm" class="d-none mt-4">
    <h3 class="h6 mb-3">Edit NOTAM</h3>
    <form method="post" action="{{ url_for('notams') }}" class="row g-3">
      <input type="hidden" name="id" value="{{ n.id }}">
      <div class="col-md-4">
        <label class="form-label">NOTAM ID</label>
        <input type="text" name="notam_id" class="form-control" value="{{ n.notam_id }}">
      </div>
      <div class="col-md-8">
        <label class="form-label">Subject</label>
        <input type="text" name="subject" class="form-control" value="{{ n.subject }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Area</label>
        <input type="text" name="area" class="form-control" value="{{ n.area }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Status</label>
        <input type="text" name="status" class="form-control" value="{{ n.status }}">
      </div>
      <div class="col-12">
        <label class="form-label">Text</label>
        <textarea name="text" rows="3" class="form-control">{{ n.text }}</textarea>
      </div>
      <div class="col-12 d-flex justify-content-between align-items-center mt-3">
        <a href="{{ url_for('notams_history') }}" class="btn btn-outline-secondary btn-sm">Back to History</a>
        <button type="submit" class="btn btn-primary btn-sm">Save Changes</button>
      </div>
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}