{% extends 'base.html' %}
{% block content %}
<div class="p-4 bg-white rounded shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="mb-0">Fleet Entry #{{ f.id }}</h2>
    <div class="btn-group btn-group-sm">
      {% if current_employee and current_employee.role in ['Manager','Administrator'] %}
        <a href="#editForm" class="btn btn-outline-primary btn-sm" onclick="document.getElementById('editForm').classList.toggle('d-none');return false;">Edit</a>
      {% endif %}
    </div>
  </div>
  <dl class="row mb-0">
    <dt class="col-sm-3">Registration</dt><dd class="col-sm-9">{{ f.registration }}</dd>
    <dt class="col-sm-3">Aircraft Type</dt><dd class="col-sm-9">{{ f.aircraft_type }}</dd>
    <dt class="col-sm-3">Base</dt><dd class="col-sm-9">{{ f.base }}</dd>
    <dt class="col-sm-3">Status</dt><dd class="col-sm-9">{{ f.status }}</dd>
    <dt class="col-sm-3">MTOW (lbs)</dt><dd class="col-sm-9">{{ f.max_takeoff_weight }}</dd>
    <dt class="col-sm-3">Useful Load (lbs)</dt><dd class="col-sm-9">{{ f.useful_load }}</dd>
    <dt class="col-sm-3">Notes</dt><dd class="col-sm-9"><pre class="small bg-light p-2 border rounded" style="white-space:pre-wrap">{{ f.notes }}</pre></dd>
  </dl>
  <div class="mt-4 d-flex justify-content-end">
    <form action="{{ url_for('delete_fleet', id=f.id) }}" method="post" onsubmit="return confirm('Delete this fleet entry?');" class="d-inline">
      <button class="btn btn-outline-danger btn-sm">Delete</button>
    </form>
  </div>
  {% if current_employee and current_employee.role in ['Manager','Administrator'] %}
  <div id="editForm" class="d-none mt-4">
    <h3 class="h6 mb-3">Edit Fleet Entry</h3>
    <form method="post" action="{{ url_for('fleet_edit', id=f.id) }}" class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Registration</label>
        <input type="text" name="registration" class="form-control" value="{{ f.registration }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Aircraft Type</label>
        <input type="text" name="aircraft_type" class="form-control" value="{{ f.aircraft_type }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Base</label>
        <input type="text" name="base" class="form-control" value="{{ f.base }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Status</label>
        <input type="text" name="status" class="form-control" value="{{ f.status }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">MTOW (lbs)</label>
        <input type="text" name="max_takeoff_weight" class="form-control" value="{{ f.max_takeoff_weight }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Useful Load (lbs)</label>
        <input type="text" name="useful_load" class="form-control" value="{{ f.useful_load }}">
      </div>
      <div class="col-12">
        <label class="form-label">Notes</label>
        <textarea name="notes" rows="3" class="form-control">{{ f.notes }}</textarea>
      </div>
      <div class="col-12 d-flex justify-content-between align-items-center mt-3">
        <a href="{{ url_for('fleet_history') }}" class="btn btn-outline-secondary btn-sm">Back to Overview</a>
        <button type="submit" class="btn btn-primary btn-sm">Save Changes</button>
      </div>
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}